{"ast":null,"code":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nexport function nonAzurePolicy() {\n  const policy = {\n    name: \"openAiEndpoint\",\n    sendRequest: (request, next) => {\n      const obj = new URL(request.url);\n      const parts = obj.pathname.split(\"/\");\n      switch (parts[parts.length - 1]) {\n        case \"completions\":\n          if (parts[parts.length - 2] === \"chat\") {\n            obj.pathname = `${parts[1]}/chat/completions`;\n          } else {\n            obj.pathname = `${parts[1]}/completions`;\n          }\n          break;\n        case \"embeddings\":\n          obj.pathname = `${parts[1]}/embeddings`;\n          break;\n        case \"generations\":\n          if (parts[parts.length - 2] === \"images\") {\n            obj.pathname = `${parts[1]}/images/generations`;\n          } else {\n            throw new Error(\"Unexpected path\");\n          }\n          break;\n        case \"transcriptions\":\n          obj.pathname = `${parts[1]}/audio/transcriptions`;\n          break;\n        case \"translations\":\n          obj.pathname = `${parts[1]}/audio/translations`;\n          break;\n      }\n      obj.searchParams.delete(\"api-version\");\n      request.url = obj.toString();\n      return next(request);\n    }\n  };\n  return policy;\n}","map":{"version":3,"names":["nonAzurePolicy","policy","name","sendRequest","request","next","obj","URL","url","parts","pathname","split","length","Error","searchParams","delete","toString"],"sources":["/workspaces/codespaces-blank/jupyter_react/node_modules/@azure/openai/src/api/policies/nonAzure.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\n/**\n * THIS IS AN AUTO-GENERATED FILE - DO NOT EDIT!\n *\n * Any changes you make here may be lost.\n *\n * If you need to make changes, please do so in the original source file, \\{project-root\\}/sources/custom\n */\n\nimport { PipelinePolicy } from \"@azure/core-rest-pipeline\";\n\nexport function nonAzurePolicy(): PipelinePolicy {\n  const policy: PipelinePolicy = {\n    name: \"openAiEndpoint\",\n    sendRequest: (request, next) => {\n      const obj = new URL(request.url);\n      const parts = obj.pathname.split(\"/\");\n      switch (parts[parts.length - 1]) {\n        case \"completions\":\n          if (parts[parts.length - 2] === \"chat\") {\n            obj.pathname = `${parts[1]}/chat/completions`;\n          } else {\n            obj.pathname = `${parts[1]}/completions`;\n          }\n          break;\n        case \"embeddings\":\n          obj.pathname = `${parts[1]}/embeddings`;\n          break;\n        case \"generations\":\n          if (parts[parts.length - 2] === \"images\") {\n            obj.pathname = `${parts[1]}/images/generations`;\n          } else {\n            throw new Error(\"Unexpected path\");\n          }\n          break;\n        case \"transcriptions\":\n          obj.pathname = `${parts[1]}/audio/transcriptions`;\n          break;\n        case \"translations\":\n          obj.pathname = `${parts[1]}/audio/translations`;\n          break;\n      }\n      obj.searchParams.delete(\"api-version\");\n      request.url = obj.toString();\n      return next(request);\n    },\n  };\n  return policy;\n}\n"],"mappings":"AAAA;AACA;AAYA,OAAM,SAAUA,cAAcA,CAAA;EAC5B,MAAMC,MAAM,GAAmB;IAC7BC,IAAI,EAAE,gBAAgB;IACtBC,WAAW,EAAEA,CAACC,OAAO,EAAEC,IAAI,KAAI;MAC7B,MAAMC,GAAG,GAAG,IAAIC,GAAG,CAACH,OAAO,CAACI,GAAG,CAAC;MAChC,MAAMC,KAAK,GAAGH,GAAG,CAACI,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC;MACrC,QAAQF,KAAK,CAACA,KAAK,CAACG,MAAM,GAAG,CAAC,CAAC;QAC7B,KAAK,aAAa;UAChB,IAAIH,KAAK,CAACA,KAAK,CAACG,MAAM,GAAG,CAAC,CAAC,KAAK,MAAM,EAAE;YACtCN,GAAG,CAACI,QAAQ,GAAG,GAAGD,KAAK,CAAC,CAAC,CAAC,mBAAmB;UAC/C,CAAC,MAAM;YACLH,GAAG,CAACI,QAAQ,GAAG,GAAGD,KAAK,CAAC,CAAC,CAAC,cAAc;UAC1C;UACA;QACF,KAAK,YAAY;UACfH,GAAG,CAACI,QAAQ,GAAG,GAAGD,KAAK,CAAC,CAAC,CAAC,aAAa;UACvC;QACF,KAAK,aAAa;UAChB,IAAIA,KAAK,CAACA,KAAK,CAACG,MAAM,GAAG,CAAC,CAAC,KAAK,QAAQ,EAAE;YACxCN,GAAG,CAACI,QAAQ,GAAG,GAAGD,KAAK,CAAC,CAAC,CAAC,qBAAqB;UACjD,CAAC,MAAM;YACL,MAAM,IAAII,KAAK,CAAC,iBAAiB,CAAC;UACpC;UACA;QACF,KAAK,gBAAgB;UACnBP,GAAG,CAACI,QAAQ,GAAG,GAAGD,KAAK,CAAC,CAAC,CAAC,uBAAuB;UACjD;QACF,KAAK,cAAc;UACjBH,GAAG,CAACI,QAAQ,GAAG,GAAGD,KAAK,CAAC,CAAC,CAAC,qBAAqB;UAC/C;MACJ;MACAH,GAAG,CAACQ,YAAY,CAACC,MAAM,CAAC,aAAa,CAAC;MACtCX,OAAO,CAACI,GAAG,GAAGF,GAAG,CAACU,QAAQ,EAAE;MAC5B,OAAOX,IAAI,CAACD,OAAO,CAAC;IACtB;GACD;EACD,OAAOH,MAAM;AACf","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}